# 🚀 План рефакторинга EM1 Game Board

## 📋 Цели рефакторинга

1. **Сохранить лучший код** - game-board/game.html с красивым интерфейсом
2. **Создать микромодульную систему** - четкое разделение ответственности
3. **Удалить дублирования** - оставить только необходимые файлы
4. **Упростить архитектуру** - единая точка входа

## 🏗️ Новая структура проекта

```
EM1/
├── index.html                 # Главная навигационная страница
├── game.html                  # Основная игровая доска (из game-board/game.html)
├── auth.html                  # Авторизация
├── lobby.html                 # Лобби
├── room.html                  # Комната ожидания
├── server.js                  # Единый сервер
├── package.json               # Зависимости
├── assets/
│   ├── css/
│   │   ├── main.css           # Основные стили
│   │   └── game.css           # Стили игры
│   └── js/
│       ├── core/              # Ядро системы
│       │   ├── GameCore.js    # Основной класс игры
│       │   ├── ModuleManager.js
│       │   ├── StateManager.js
│       │   └── EventBus.js
│       ├── modules/           # Игровые модули
│       │   ├── api/
│       │   │   └── ApiClient.js
│       │   ├── game/
│       │   │   ├── Board.js
│       │   │   ├── Dice.js
│       │   │   ├── Player.js
│       │   │   └── GameState.js
│       │   ├── ui/
│       │   │   ├── Lobby.js
│       │   │   ├── Room.js
│       │   │   └── Auth.js
│       │   └── shared/
│       │       └── Utils.js
│       └── utils/
│           ├── constants.js
│           └── helpers.js
└── config/
    └── game-config.js
```

## 🎯 Принципы микромодульной системы

1. **Единая ответственность** - каждый модуль отвечает за одну функцию
2. **Слабая связанность** - модули взаимодействуют через события
3. **Высокая сплоченность** - связанные функции в одном модуле
4. **Простота тестирования** - каждый модуль можно тестировать отдельно

## 📦 Модули системы

### Core модули
- **GameCore** - центральный координатор
- **ModuleManager** - управление модулями
- **StateManager** - управление состоянием
- **EventBus** - система событий

### Game модули
- **Board** - игровая доска
- **Dice** - кубики
- **Player** - игроки
- **GameState** - состояние игры

### UI модули
- **Lobby** - лобби
- **Room** - комната
- **Auth** - авторизация

### API модули
- **ApiClient** - единый клиент API

## 🗑️ Файлы для удаления

- `game-board/` - дублирующая папка
- `test-*.html` - тестовые файлы (кроме test-all-scenarios.html)
- `perfect.html`, `debug.html`, `cashflow.html` - дублирующие страницы
- `server-*.js` - дублирующие серверы
- `minimal-server.js` - минимальный сервер
- `shared-*.js` - дублирующие утилиты

## ✅ Этапы выполнения

1. ✅ Анализ лучшего кода
2. 🔄 Создание новой структуры
3. ⏳ Перенос game-board/game.html в game.html
4. ⏳ Создание микромодульной системы
5. ⏳ Удаление дублирующихся файлов
6. ⏳ Тестирование системы
