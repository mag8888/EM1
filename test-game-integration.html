<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" href="/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ - EM1</title>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0c1424 0%, #181f32 50%, #0a101f 100%);
            color: #f3f4f6;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .test-section {
            background: rgba(21, 27, 42, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .test-section h3 {
            color: #00ff96;
            margin-top: 0;
        }

        .test-result {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }

        .test-success {
            background: rgba(0, 255, 150, 0.1);
            border: 1px solid #00ff96;
            color: #00ff96;
        }

        .test-error {
            background: rgba(255, 59, 59, 0.1);
            border: 1px solid #ff3b3b;
            color: #ff3b3b;
        }

        .test-info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid #3b82f6;
            color: #3b82f6;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(135deg, #00ff96 0%, #00cc7a 100%);
            border: none;
            color: #000;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 150, 0.3);
        }

        .btn:disabled {
            background: #6b7280;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
        }

        .stat-card h4 {
            color: #00ff96;
            margin-top: 0;
        }

        .log {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ EM1</h1>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–≥—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã</p>
        </div>

        <div class="test-section">
            <h3>üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã</h3>
            <div class="controls">
                <button class="btn" onclick="initGameSystem()">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É</button>
                <button class="btn" onclick="startGame()" id="startBtn" disabled>–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                <button class="btn" onclick="resetSystem()">–°–±—Ä–æ—Å–∏—Ç—å —Å–∏—Å—Ç–µ–º—É</button>
            </div>
            <div id="initResults"></div>
        </div>

        <div class="test-section">
            <h3>üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞</h3>
            <div class="controls">
                <button class="btn" onclick="testCellGeneration()" id="cellBtn" disabled>–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–µ—Ç–æ–∫</button>
                <button class="btn" onclick="testDiceRoll()" id="diceBtn" disabled>–¢–µ—Å—Ç –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–∞</button>
                <button class="btn" onclick="testPlayerMovement()" id="moveBtn" disabled>–¢–µ—Å—Ç –¥–≤–∏–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞</button>
                <button class="btn" onclick="testTurnSystem()" id="turnBtn" disabled>–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Ö–æ–¥–æ–≤</button>
            </div>
            <div id="processResults"></div>
        </div>

        <div class="test-section">
            <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
            <div class="stats-grid" id="statsGrid">
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <div class="test-section">
            <h3>üìù –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π</h3>
            <div class="controls">
                <button class="btn" onclick="clearLog()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
                <button class="btn" onclick="exportLog()">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥</button>
            </div>
            <div id="eventLog" class="log"></div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π -->
    <script type="module">
        import { GameCore } from './assets/js/core/GameCore.js';
        import { GAME_CONFIG } from './config/game-config.js';

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        window.gameCore = null;
        window.testLog = [];

        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            window.testLog.push({ message: logEntry, type });
            
            const logElement = document.getElementById('eventLog');
            if (logElement) {
                logElement.textContent += logEntry + '\n';
                logElement.scrollTop = logElement.scrollHeight;
            }
            
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞
        function showTestResult(containerId, message, type = 'info') {
            const container = document.getElementById(containerId);
            if (!container) return;

            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result test-${type}`;
            resultDiv.textContent = message;
            container.appendChild(resultDiv);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
        window.initGameSystem = async function() {
            try {
                log('üöÄ –ù–∞—á–∞–ª–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã...', 'info');
                
                // –°–æ–∑–¥–∞–µ–º GameCore
                window.gameCore = new GameCore();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É
                await window.gameCore.init();
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
                const playerManager = window.gameCore.getModule('playerManager');
                if (playerManager) {
                    const testPlayers = [
                        { id: 'player1', name: '–ò–≥—Ä–æ–∫ 1', email: 'player1@test.com' },
                        { id: 'player2', name: '–ò–≥—Ä–æ–∫ 2', email: 'player2@test.com' },
                        { id: 'player3', name: '–ò–≥—Ä–æ–∫ 3', email: 'player3@test.com' }
                    ];

                    for (const playerData of testPlayers) {
                        await playerManager.addPlayer(playerData);
                    }
                    
                    log(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ ${testPlayers.length} —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤`, 'success');
                }

                // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
                await window.gameCore.start();

                showTestResult('initResults', '‚úÖ –ò–≥—Ä–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞', 'success');
                log('‚úÖ –ò–≥—Ä–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!', 'success');

                // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                document.getElementById('startBtn').disabled = false;
                document.getElementById('cellBtn').disabled = false;
                document.getElementById('diceBtn').disabled = false;
                document.getElementById('moveBtn').disabled = false;
                document.getElementById('turnBtn').disabled = false;

            } catch (error) {
                showTestResult('initResults', `‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`, 'error');
                log(`‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`, 'error');
            }
        };

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        window.startGame = async function() {
            try {
                log('üéÆ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã...', 'info');
                
                const stats = window.gameCore.getGameStats();
                showTestResult('initResults', `üéÆ –ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: ${JSON.stringify(stats, null, 2)}`, 'info');
                log('üéÆ –ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–∞!', 'success');

            } catch (error) {
                showTestResult('initResults', `‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã: ${error.message}`, 'error');
                log(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã: ${error.message}`, 'error');
            }
        };

        // –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–µ—Ç–æ–∫
        window.testCellGeneration = function() {
            try {
                log('üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–µ—Ç–æ–∫...', 'info');
                
                const cellGenerator = window.gameCore.getModule('cellGenerator');
                if (!cellGenerator) {
                    throw new Error('CellGenerator –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }

                const boardInfo = cellGenerator.getBoardInfo();
                const cellsStats = cellGenerator.getCellsStats();

                showTestResult('processResults', 
                    `‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–µ—Ç–æ–∫: ${boardInfo.totalCells} –∫–ª–µ—Ç–æ–∫, —Ç–∏–ø—ã: ${Object.keys(cellsStats.byType).join(', ')}`, 
                    'success'
                );
                
                log(`üéØ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ ${boardInfo.totalCells} –∫–ª–µ—Ç–æ–∫`, 'success');
                log(`üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª–µ—Ç–æ–∫: ${JSON.stringify(cellsStats, null, 2)}`, 'info');

            } catch (error) {
                showTestResult('processResults', `‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–µ—Ç–æ–∫: ${error.message}`, 'error');
                log(`‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–µ—Ç–æ–∫: ${error.message}`, 'error');
            }
        };

        // –¢–µ—Å—Ç –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–∞
        window.testDiceRoll = async function() {
            try {
                log('üé≤ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–∞...', 'info');
                
                const diceModule = window.gameCore.getModule('diceModule');
                if (!diceModule) {
                    throw new Error('DiceModule –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }

                const result = await diceModule.roll();
                
                showTestResult('processResults', 
                    `‚úÖ –ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞: ${result.values.join(' + ')} = ${result.total} ${result.isDouble ? '(–¥—É–±–ª—å!)' : ''}`, 
                    'success'
                );
                
                log(`üé≤ –†–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞: ${result.values.join(' + ')} = ${result.total}`, 'success');
                
                const stats = diceModule.getStats();
                log(`üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—É–±–∏–∫–æ–≤: ${JSON.stringify(stats, null, 2)}`, 'info');

            } catch (error) {
                showTestResult('processResults', `‚ùå –û—à–∏–±–∫–∞ –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–∞: ${error.message}`, 'error');
                log(`‚ùå –û—à–∏–±–∫–∞ –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–∞: ${error.message}`, 'error');
            }
        };

        // –¢–µ—Å—Ç –¥–≤–∏–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞
        window.testPlayerMovement = async function() {
            try {
                log('üö∂ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞...', 'info');
                
                const movementModule = window.gameCore.getModule('movementModule');
                if (!movementModule) {
                    throw new Error('MovementModule –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }

                const currentPlayer = window.gameCore.getCurrentPlayer();
                if (!currentPlayer) {
                    throw new Error('–¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }

                const result = await movementModule.movePlayer(currentPlayer.id, 5);
                
                showTestResult('processResults', 
                    `‚úÖ –î–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ ${currentPlayer.name}: —Å ${result.from.position} –Ω–∞ ${result.to.position}`, 
                    'success'
                );
                
                log(`üö∂ –ò–≥—Ä–æ–∫ ${currentPlayer.name} –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª—Å—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—é ${result.to.position}`, 'success');

            } catch (error) {
                showTestResult('processResults', `‚ùå –û—à–∏–±–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞: ${error.message}`, 'error');
                log(`‚ùå –û—à–∏–±–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞: ${error.message}`, 'error');
            }
        };

        // –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Ö–æ–¥–æ–≤
        window.testTurnSystem = function() {
            try {
                log('üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ö–æ–¥–æ–≤...', 'info');
                
                const turnController = window.gameCore.getModule('turnController');
                if (!turnController) {
                    throw new Error('TurnController –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }

                const currentPlayer = turnController.getCurrentPlayer();
                const turnsStats = turnController.getTurnsStats();

                showTestResult('processResults', 
                    `‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ö–æ–¥–æ–≤: —Ç–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫ ${currentPlayer?.name || '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω'}, —Ñ–∞–∑–∞: ${turnsStats.currentPhase}`, 
                    'success'
                );
                
                log(`üéÆ –¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫: ${currentPlayer?.name || '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω'}`, 'success');
                log(`üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ö–æ–¥–æ–≤: ${JSON.stringify(turnsStats, null, 2)}`, 'info');

            } catch (error) {
                showTestResult('processResults', `‚ùå –û—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã —Ö–æ–¥–æ–≤: ${error.message}`, 'error');
                log(`‚ùå –û—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã —Ö–æ–¥–æ–≤: ${error.message}`, 'error');
            }
        };

        // –°–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã
        window.resetSystem = function() {
            try {
                log('üîÑ –°–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã...', 'info');
                
                if (window.gameCore) {
                    window.gameCore.destroy();
                    window.gameCore = null;
                }

                // –û—á–∏—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
                document.getElementById('initResults').innerHTML = '';
                document.getElementById('processResults').innerHTML = '';
                document.getElementById('statsGrid').innerHTML = '';

                // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏
                document.getElementById('startBtn').disabled = true;
                document.getElementById('cellBtn').disabled = true;
                document.getElementById('diceBtn').disabled = true;
                document.getElementById('moveBtn').disabled = true;
                document.getElementById('turnBtn').disabled = true;

                showTestResult('initResults', 'üîÑ –°–∏—Å—Ç–µ–º–∞ —Å–±—Ä–æ—à–µ–Ω–∞', 'info');
                log('üîÑ –°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Å–±—Ä–æ—à–µ–Ω–∞', 'success');

            } catch (error) {
                showTestResult('initResults', `‚ùå –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞: ${error.message}`, 'error');
                log(`‚ùå –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞: ${error.message}`, 'error');
            }
        };

        // –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–∞
        window.clearLog = function() {
            document.getElementById('eventLog').textContent = '';
            window.testLog = [];
            log('üìù –õ–æ–≥ –æ—á–∏—â–µ–Ω', 'info');
        };

        // –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–∞
        window.exportLog = function() {
            const logContent = window.testLog.map(entry => entry.message).join('\n');
            const blob = new Blob([logContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `game-test-log-${new Date().toISOString().slice(0, 19)}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            log('üì§ –õ–æ–≥ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω', 'info');
        };

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            if (!window.gameCore) return;

            try {
                const stats = window.gameCore.getGameStats();
                const statsGrid = document.getElementById('statsGrid');
                
                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <h4>üéÆ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã</h4>
                        <p>–ó–∞–ø—É—â–µ–Ω–∞: ${stats.gameState.isRunning ? '–î–∞' : '–ù–µ—Ç'}</p>
                        <p>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞: ${stats.gameState.isInitialized ? '–î–∞' : '–ù–µ—Ç'}</p>
                        <p>–¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫: ${stats.gameState.currentPlayer?.name || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω'}</p>
                    </div>
                    
                    <div class="stat-card">
                        <h4>üéØ –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ</h4>
                        <p>–í—Å–µ–≥–æ –∫–ª–µ—Ç–æ–∫: ${stats.gameBoard?.total || 0}</p>
                        <p>–¢–∏–ø—ã –∫–ª–µ—Ç–æ–∫: ${stats.gameBoard ? Object.keys(stats.gameBoard.byType).length : 0}</p>
                        <p>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: $${stats.gameBoard?.totalCost || 0}</p>
                    </div>
                    
                    <div class="stat-card">
                        <h4>üé≤ –ö—É–±–∏–∫–∏</h4>
                        <p>–í—Å–µ–≥–æ –±—Ä–æ—Å–∫–æ–≤: ${stats.dice?.totalRolls || 0}</p>
                        <p>–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${stats.dice?.averageRoll || 0}</p>
                        <p>–î—É–±–ª–µ–π: ${stats.dice?.doublesCount || 0}</p>
                    </div>
                    
                    <div class="stat-card">
                        <h4>üéÆ –•–æ–¥—ã</h4>
                        <p>–í—Å–µ–≥–æ —Ö–æ–¥–æ–≤: ${stats.turns?.totalTurns || 0}</p>
                        <p>–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞: ${stats.turns?.currentPhase || '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞'}</p>
                        <p>–ü–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Ö–æ–¥–æ–≤: ${stats.turns?.consecutiveTurns || 0}</p>
                    </div>
                `;
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: ${error.message}`, 'error');
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        setInterval(updateStats, 2000);

        // –õ–æ–≥–∏—Ä—É–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
        log('üéÆ –¢–µ—Å—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ', 'success');
    </script>
</body>
</html>
