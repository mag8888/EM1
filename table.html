<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игровой стол - Энергия денег</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0c1445 100%);
            color: white;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
            pointer-events: none;
        }

        .game-container {
            display: flex;
            height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* Игровое поле */
        .game-board {
            flex: 1;
            background: rgba(22, 33, 62, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .board-wrapper {
            position: relative;
            width: 88vh;
            height: 88vh;
            max-width: 880px;
            max-height: 880px;
            filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.1));
        }

        /* Внешний трек - квадратное поле */
        .outer-track {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 0;
            background: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            box-shadow: 
                inset 0 0 0 1px rgba(255, 255, 255, 0.1),
                0 0 20px rgba(255, 255, 255, 0.05);
        }

        .outer-squares {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .outer-square {
            position: absolute;
            width: 44px;
            height: 44px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .outer-square::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .outer-square:hover {
            transform: scale(1.15) translateY(-2px);
            z-index: 10;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .outer-square:hover::before {
            opacity: 1;
        }


        /* Внутренний спиральный трек */
        .inner-track {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 66%;
            height: 66%;
        }

        .inner-squares {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .inner-square {
            position: absolute;
            width: 66px;
            height: 66px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(8px);
            box-shadow: 
                0 2px 6px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .inner-square::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .inner-square:hover {
            transform: scale(1.25) translateY(-2px);
            z-index: 10;
            box-shadow: 
                0 6px 20px rgba(0, 0, 0, 0.3),
                0 0 15px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .inner-square:hover::before {
            opacity: 1;
        }



        /* Цифры в углу клеток */
        .square-number {
            position: absolute;
            top: 4px;
            right: 4px;
            font-size: 10px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            z-index: 2;
        }

        /* Цифры в левом нижнем углу для клеток 11-24 */
        .square-number.bottom-left {
            top: auto;
            right: auto;
            bottom: 4px;
            left: 4px;
        }

        /* Крупные однотонные иконки */
        .square-icon {
            font-size: 32px;
            filter: grayscale(100%) brightness(1.2);
            opacity: 0.9;
        }

        .inner-square .square-icon {
            font-size: 28px;
        }

        /* Центральный логотип */
        .center-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 160px;
            height: 160px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 8px 32px rgba(255, 215, 0, 0.4),
                0 0 0 4px rgba(255, 215, 0, 0.2);
            z-index: 20;
            position: relative;
            overflow: hidden;
        }

        .logo-inner {
            width: 140px;
            height: 140px;
            background: radial-gradient(circle, #000000 0%, #1a1a1a 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .dice {
            font-size: 48px;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 
                0 0 20px rgba(255, 215, 0, 0.8),
                0 0 40px rgba(255, 165, 0, 0.6);
            z-index: 3;
            position: relative;
        }

        .dice.rolling {
            animation: diceRoll 0.1s infinite;
        }

        @keyframes diceRoll {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(0.9); }
            75% { transform: rotate(270deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        /* Энергетические линии */
        .energy-lines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                transparent 0deg,
                rgba(255, 215, 0, 0.3) 45deg,
                transparent 90deg,
                rgba(255, 165, 0, 0.3) 135deg,
                transparent 180deg,
                rgba(255, 140, 0, 0.3) 225deg,
                transparent 270deg,
                rgba(255, 215, 0, 0.3) 315deg,
                transparent 360deg
            );
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Светящиеся точки */
        .glow-dots {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .glow-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #FFD700;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            animation: pulse 2s ease-in-out infinite;
        }

        .glow-dot:nth-child(1) {
            transform: translate(-50%, -50%) rotate(0deg) translateY(-50px);
            animation-delay: 0s;
        }

        .glow-dot:nth-child(2) {
            transform: translate(-50%, -50%) rotate(60deg) translateY(-50px);
            animation-delay: 0.3s;
        }

        .glow-dot:nth-child(3) {
            transform: translate(-50%, -50%) rotate(120deg) translateY(-50px);
            animation-delay: 0.6s;
        }

        .glow-dot:nth-child(4) {
            transform: translate(-50%, -50%) rotate(180deg) translateY(-50px);
            animation-delay: 0.9s;
        }

        .glow-dot:nth-child(5) {
            transform: translate(-50%, -50%) rotate(240deg) translateY(-50px);
            animation-delay: 1.2s;
        }

        .glow-dot:nth-child(6) {
            transform: translate(-50%, -50%) rotate(300deg) translateY(-50px);
            animation-delay: 1.5s;
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 0.3;
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        /* Внешние монеты */
        .outer-coins {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .coin {
            position: absolute;
            width: 24px;
            height: 24px;
            background: radial-gradient(circle, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.6);
            border: 2px solid #FFD700;
        }

        .coin:nth-child(1) {
            transform: translate(-50%, -50%) rotate(45deg) translateY(-70px);
        }

        .coin:nth-child(2) {
            transform: translate(-50%, -50%) rotate(135deg) translateY(-70px);
        }

        .coin:nth-child(3) {
            transform: translate(-50%, -50%) rotate(225deg) translateY(-70px);
        }

        .coin:nth-child(4) {
            transform: translate(-50%, -50%) rotate(315deg) translateY(-70px);
        }

        .coin-symbol {
            font-size: 12px;
            font-weight: bold;
            color: #000000;
        }

        /* Фишки игроков */
        .player-token {
            position: absolute;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 800;
            color: white;
            border: 3px solid rgba(255, 255, 255, 0.9);
            z-index: 15;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(5px);
        }

        .player-token:hover {
            transform: scale(1.3) translateY(-3px);
            box-shadow: 
                0 8px 20px rgba(0, 0, 0, 0.4),
                0 0 30px rgba(255, 255, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        .player-1 { 
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
            box-shadow: 
                0 4px 12px rgba(239, 68, 68, 0.4),
                0 0 20px rgba(239, 68, 68, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        .player-2 { 
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1d4ed8 100%);
            box-shadow: 
                0 4px 12px rgba(59, 130, 246, 0.4),
                0 0 20px rgba(59, 130, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        .player-3 { 
            background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
            box-shadow: 
                0 4px 12px rgba(16, 185, 129, 0.4),
                0 0 20px rgba(16, 185, 129, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        /* Боковая панель */
        .sidebar {
            width: 320px;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            box-shadow: 
                -10px 0 30px rgba(0, 0, 0, 0.3),
                inset 1px 0 0 rgba(255, 255, 255, 0.1);
            overflow-y: auto;
            max-height: 100vh;
        }

        /* Стилизация скроллбара */
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(16, 185, 129, 0.5);
            border-radius: 3px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background: rgba(16, 185, 129, 0.7);
        }

        .section {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .section:hover {
            background: rgba(30, 41, 59, 0.8);
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
        }

        .section-title {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #e2e8f0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .assets-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 4px 15px rgba(16, 185, 129, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .assets-button:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 50%, #065f46 100%);
            transform: translateY(-3px);
            box-shadow: 
                0 8px 25px rgba(16, 185, 129, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .roll-dice-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 18px;
            box-shadow: 
                0 6px 20px rgba(16, 185, 129, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .roll-dice-button:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 50%, #065f46 100%);
            transform: translateY(-4px);
            box-shadow: 
                0 12px 30px rgba(16, 185, 129, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .roll-dice-button:disabled {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 50%, #374151 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .turn-timer {
            margin-bottom: 15px;
        }

        .timer-bar {
            width: 100%;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .timer-fill {
            height: 100%;
            background: #10b981;
            transition: width 1s linear;
        }

        .timer-text {
            font-size: 12px;
            color: #94a3b8;
            text-align: center;
        }

        .players-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .player-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: #374151;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .player-item:hover {
            background: #4b5563;
        }

        .player-item.current {
            background: #1e40af;
        }

        .player-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: white;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 2px;
        }

        .player-role {
            font-size: 10px;
            color: #94a3b8;
        }

        .player-status {
            font-size: 10px;
            color: #10b981;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .current-player {
            margin-top: 15px;
        }

        .current-player-title {
            font-size: 12px;
            color: #94a3b8;
            margin-bottom: 8px;
        }

        .current-player-info {
            padding: 10px;
            background: #374151;
            border-radius: 6px;
            text-align: center;
            font-size: 12px;
            color: #e5e7eb;
        }

        /* Превью банка */
        .bank-preview {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .bank-preview:hover {
            background: rgba(30, 41, 59, 0.8);
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
        }

        .bank-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .bank-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            font-weight: 700;
            color: #e2e8f0;
        }

        .bank-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .bank-status {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .bank-balance {
            text-align: center;
            margin-bottom: 16px;
        }

        .balance-amount {
            font-size: 24px;
            font-weight: 800;
            color: #10b981;
            margin-bottom: 4px;
        }

        .balance-label {
            font-size: 12px;
            color: #94a3b8;
        }

        .bank-stats {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .bank-stat {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 12px;
        }

        .stat-label {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #e2e8f0;
        }

        .stat-value {
            font-weight: 600;
        }

        .stat-value.income {
            color: #10b981;
        }

        .stat-value.expenses {
            color: #ef4444;
        }

        .stat-value.payday {
            color: #f59e0b;
        }

        .bank-actions {
            margin-top: 12px;
            display: flex;
            gap: 8px;
        }

        .bank-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .bank-btn.primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .bank-btn.secondary {
            background: rgba(107, 114, 128, 0.3);
            color: #e2e8f0;
            border: 1px solid rgba(107, 114, 128, 0.5);
        }

        .bank-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* Анимация кубика под кнопкой */
        .dice-animation-container {
            display: flex;
            justify-content: center;
            margin-top: 12px;
            padding: 8px;
        }

        .mini-dice {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: #000;
            box-shadow: 
                0 4px 12px rgba(255, 215, 0, 0.4),
                0 0 0 2px rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
            animation: miniDiceIdle 2s ease-in-out infinite;
        }

        .mini-dice.rolling {
            animation: miniDiceRoll 0.1s infinite;
        }

        @keyframes miniDiceIdle {
            0%, 100% { 
                transform: rotate(0deg) scale(1);
                box-shadow: 
                    0 4px 12px rgba(255, 215, 0, 0.4),
                    0 0 0 2px rgba(255, 215, 0, 0.2);
            }
            50% { 
                transform: rotate(5deg) scale(1.05);
                box-shadow: 
                    0 6px 16px rgba(255, 215, 0, 0.6),
                    0 0 0 3px rgba(255, 215, 0, 0.3);
            }
        }

        @keyframes miniDiceRoll {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(0.9); }
            75% { transform: rotate(270deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        /* Цвета квадратов */
        .square-green { background: #10b981; color: white; }
        .square-pink { background: #ec4899; color: white; }
        .square-yellow { background: #fbbf24; color: #1f2937; }
        .square-red { background: #ef4444; color: white; }
        .square-blue { background: #3b82f6; color: white; }
        .square-orange { background: #f97316; color: white; }
        .square-light-blue { background: #06b6d4; color: white; }
        .square-black { background: #1f2937; color: white; }

        /* Анимации */
        @keyframes rollDice {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
            100% { transform: rotate(360deg); }
        }

        .dice.rolling {
            animation: rollDice 0.5s ease-in-out;
        }

        @keyframes moveToken {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .player-token.moving {
            animation: moveToken 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Игровое поле -->
        <div class="game-board">
            <div class="board-wrapper">
                <!-- Внешний трек -->
                <div class="outer-track">
                    <div class="outer-squares" id="outerSquares"></div>
                </div>


                <!-- Внутренний трек -->
                <div class="inner-track">
                    <div class="inner-squares" id="innerSquares"></div>
                </div>

                <!-- Центральный логотип -->
                <div class="center-logo">
                    <div class="logo-inner">
                        <!-- Центральный результат броска кубика -->
                        <div class="dice" id="dice">3</div>
                        
                        <!-- Энергетические линии -->
                        <div class="energy-lines"></div>
                        
                        <!-- Дополнительные светящиеся точки -->
                        <div class="glow-dots">
                            <div class="glow-dot"></div>
                            <div class="glow-dot"></div>
                            <div class="glow-dot"></div>
                            <div class="glow-dot"></div>
                            <div class="glow-dot"></div>
                            <div class="glow-dot"></div>
                        </div>
                    </div>
                    
                    <!-- Внешние монеты -->
                    <div class="outer-coins">
                        <div class="coin"><span class="coin-symbol">$</span></div>
                        <div class="coin"><span class="coin-symbol">$</span></div>
                        <div class="coin"><span class="coin-symbol">$</span></div>
                        <div class="coin"><span class="coin-symbol">$</span></div>
                    </div>
                </div>

                <!-- Фишки игроков -->
                <div class="player-token player-1" id="player1" style="top: 50%; left: 50%;">1</div>
                <div class="player-token player-2" id="player2" style="top: 50%; left: 50%;">2</div>
                <div class="player-token player-3" id="player3" style="top: 50%; left: 50%;">3</div>
            </div>
        </div>

        <!-- Боковая панель -->
        <div class="sidebar">
            <!-- 1. Банк -->
            <div class="bank-preview" onclick="openBank()">
                <div class="bank-header">
                    <div class="bank-title">
                        <div class="bank-icon">🏦</div>
                        <span>Банк</span>
                    </div>
                    <div class="bank-status">Активен</div>
                </div>
                
                <div class="bank-balance">
                    <div class="balance-amount" id="bankBalance">$3 000</div>
                    <div class="balance-label">Доступно для операций</div>
                </div>
                
                <div class="bank-stats">
                    <div class="bank-stat">
                        <div class="stat-label">
                            <span>📈</span>
                            <span>Доход:</span>
                        </div>
                        <div class="stat-value income">$6 000</div>
                    </div>
                    <div class="bank-stat">
                        <div class="stat-label">
                            <span>📉</span>
                            <span>Расходы:</span>
                        </div>
                        <div class="stat-value expenses">$2 500</div>
                    </div>
                    <div class="bank-stat">
                        <div class="stat-label">
                            <span>💰</span>
                            <span>PAYDAY:</span>
                        </div>
                        <div class="stat-value payday">$3 500/мес</div>
                    </div>
                </div>
                
                <div class="bank-actions">
                    <button class="bank-btn secondary" onclick="event.stopPropagation(); viewDetails()">
                        <span>👁</span>
                        <span>Детали</span>
                    </button>
                    <button class="bank-btn primary" onclick="event.stopPropagation(); openBank()">
                        <span>🏦</span>
                        <span>Открыть</span>
                    </button>
                </div>
            </div>

            <!-- 2. Активы -->
            <div class="section">
                <div class="section-title">Активы</div>
                <button class="assets-button">
                    <span>💰</span>
                    <span>Мои активы</span>
                </button>
            </div>

            <!-- 3. Очередность игроков -->
            <div class="section">
                <div class="section-title">Очередность игроков</div>
                <div class="players-list">
                    <div class="player-item current" id="player1Item">
                        <div class="player-avatar player-1">1</div>
                        <div class="player-info">
                            <div class="player-name">Игрок 1</div>
                            <div class="player-role">Врач</div>
                        </div>
                        <div class="player-status">
                            <span>✓</span>
                            <span>Готов</span>
                        </div>
                    </div>
                    <div class="player-item" id="player2Item">
                        <div class="player-avatar player-2">2</div>
                        <div class="player-info">
                            <div class="player-name">Игрок 2</div>
                            <div class="player-role">Инвестор</div>
                        </div>
                        <div class="player-status">
                            <span>✓</span>
                            <span>Готов</span>
                        </div>
                    </div>
                    <div class="player-item" id="player3Item">
                        <div class="player-avatar player-3">3</div>
                        <div class="player-info">
                            <div class="player-name">Игрок 3</div>
                            <div class="player-role">Финансист</div>
                        </div>
                        <div class="player-status">
                            <span>✓</span>
                            <span>Готов</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. Бросить кубик -->
            <div class="section">
                <div class="section-title">Действия</div>
                <button class="roll-dice-button" id="rollDiceBtn">
                    <span>🎲</span>
                    <span>Бросить кубик</span>
                </button>
                <!-- Анимация кубика под кнопкой -->
                <div class="dice-animation-container">
                    <div class="mini-dice" id="miniDice">3</div>
                </div>
            </div>

            <!-- 5. Шкала тайминга -->
            <div class="section">
                <div class="section-title">Время хода</div>
                <div class="turn-timer">
                    <div class="timer-bar">
                        <div class="timer-fill" id="timerFill" style="width: 100%;"></div>
                    </div>
                    <div class="timer-text" id="timerText">2:00 / 2:00</div>
                </div>
            </div>

            <!-- Текущий игрок -->
            <div class="section current-player">
                <div class="current-player-title">Текущий игрок</div>
                <div class="current-player-info" id="currentPlayerInfo">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <div class="player-avatar player-1" style="width: 20px; height: 20px; font-size: 10px;">1</div>
                        <div>
                            <div style="font-weight: bold;">Игрок 1</div>
                            <div style="font-size: 12px; color: #94a3b8;">Врач</div>
                        </div>
                    </div>
                    <div style="font-size: 14px; font-weight: bold; color: #10b981;">$10000</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Игровые переменные
        let currentPlayer = 1;
        let gameTimer = 120; // 2 минуты в секундах
        let timerInterval;
        let isRolling = false;

        // Инициализация игры
        function initGame() {
            createOuterTrack();
            createInnerTrack();
            startTimer();
            updateCurrentPlayer();
        }

        // Создание внешнего трека (52 квадрата) - квадратное поле
        function createOuterTrack() {
            const outerSquares = document.getElementById('outerSquares');
            const colors = ['square-green', 'square-pink', 'square-yellow'];
            const icons = ['📊', '💰', '🏠', '❤️', '🚗', '🎓', '☕', '🔧', '👤', '🎁', '💳', '📈'];
            
            // Квадратное поле: 13 квадратов на каждую сторону
            const squaresPerSide = 13;
            const totalSquares = 52;
            
            for (let i = 1; i <= totalSquares; i++) {
                const square = document.createElement('div');
                square.className = `outer-square ${colors[(i - 1) % colors.length]}`;
                
                // Позиционирование по квадратному периметру
                let x, y;
                
                if (i <= squaresPerSide) {
                    // Верхняя сторона
                    x = 5 + (i - 1) * (90 / (squaresPerSide - 1));
                    y = 5;
                } else if (i <= squaresPerSide * 2) {
                    // Правая сторона
                    x = 95;
                    y = 5 + (i - squaresPerSide - 1) * (90 / (squaresPerSide - 1));
                } else if (i <= squaresPerSide * 3) {
                    // Нижняя сторона (справа налево)
                    x = 95 - ((i - squaresPerSide * 2 - 1) * (90 / (squaresPerSide - 1)));
                    y = 95;
                } else {
                    // Левая сторона (снизу вверх)
                    x = 5;
                    y = 95 - ((i - squaresPerSide * 3 - 1) * (90 / (squaresPerSide - 1)));
                }
                
                square.style.left = `${x}%`;
                square.style.top = `${y}%`;
                square.style.transform = 'translate(-50%, -50%)';
                
                // Добавляем цифру в угол
                const number = document.createElement('div');
                number.className = 'square-number';
                number.textContent = i;
                square.appendChild(number);
                
                // Добавляем крупную иконку
                const icon = document.createElement('div');
                icon.className = 'square-icon';
                icon.textContent = icons[(i - 1) % icons.length];
                square.appendChild(icon);
                
                outerSquares.appendChild(square);
            }
        }

        // Создание внутреннего трека (24 квадрата) - ровный круг
        function createInnerTrack() {
            const innerSquares = document.getElementById('innerSquares');
            const colors = ['square-light-blue', 'square-pink', 'square-orange', 'square-yellow', 'square-green'];
            const icons = ['📊', '💰', '🏠', '❤️', '👤', '🎁'];
            
            for (let i = 1; i <= 24; i++) {
                const square = document.createElement('div');
                square.className = `inner-square ${colors[(i - 1) % colors.length]}`;
                
                // Ровное круговое позиционирование
                const angle = (i - 1) * (360 / 24) * (Math.PI / 180);
                const radius = 38.5; // фиксированный радиус для ровного круга (увеличен на 10%)
                const x = 50 + radius * Math.cos(angle);
                const y = 50 + radius * Math.sin(angle);
                
                square.style.left = `${x}%`;
                square.style.top = `${y}%`;
                square.style.transform = 'translate(-50%, -50%)';
                
                // Добавляем цифру в угол
                const number = document.createElement('div');
                number.className = i >= 11 ? 'square-number bottom-left' : 'square-number';
                number.textContent = i;
                square.appendChild(number);
                
                // Добавляем крупную иконку
                const icon = document.createElement('div');
                icon.className = 'square-icon';
                icon.textContent = icons[(i - 1) % icons.length];
                square.appendChild(icon);
                
                innerSquares.appendChild(square);
            }
        }

        // Бросок кубика
        function rollDice() {
            if (isRolling) return;
            
            isRolling = true;
            const dice = document.getElementById('dice');
            const miniDice = document.getElementById('miniDice');
            const rollDiceBtn = document.getElementById('rollDiceBtn');
            
            rollDiceBtn.disabled = true;
            dice.classList.add('rolling');
            miniDice.classList.add('rolling');
            
            // Анимация броска
            let rollCount = 0;
            const rollInterval = setInterval(() => {
                const randomValue = Math.floor(Math.random() * 6) + 1;
                dice.textContent = randomValue;
                miniDice.textContent = randomValue;
                rollCount++;
                
                if (rollCount >= 10) {
                    clearInterval(rollInterval);
                    const finalValue = Math.floor(Math.random() * 6) + 1;
                    dice.textContent = finalValue;
                    miniDice.textContent = finalValue;
                    dice.classList.remove('rolling');
                    miniDice.classList.remove('rolling');
                    
                    // Перемещение фишки
                    movePlayerToken(finalValue);
                    
                    // Смена игрока через 2 секунды
                    setTimeout(() => {
                        nextPlayer();
                        rollDiceBtn.disabled = false;
                        isRolling = false;
                    }, 2000);
                }
            }, 100);
        }

        // Перемещение фишки игрока
        function movePlayerToken(steps) {
            const playerToken = document.getElementById(`player${currentPlayer}`);
            playerToken.classList.add('moving');
            
            // Перемещение по ровному кругу внутреннего трека
            const currentAngle = (currentPlayer - 1) * 120; // 120 градусов между игроками
            const newAngle = currentAngle + (steps * 15); // 15 градусов на шаг
            const radius = 35; // тот же радиус, что и у внутреннего трека
            const x = 50 + radius * Math.cos(newAngle * Math.PI / 180);
            const y = 50 + radius * Math.sin(newAngle * Math.PI / 180);
            
            playerToken.style.left = `${x}%`;
            playerToken.style.top = `${y}%`;
            
            setTimeout(() => {
                playerToken.classList.remove('moving');
            }, 500);
        }

        // Смена игрока
        function nextPlayer() {
            // Убираем выделение с текущего игрока
            document.getElementById(`player${currentPlayer}Item`).classList.remove('current');
            
            // Переходим к следующему игроку
            currentPlayer = currentPlayer === 3 ? 1 : currentPlayer + 1;
            
            // Выделяем нового игрока
            document.getElementById(`player${currentPlayer}Item`).classList.add('current');
            
            updateCurrentPlayer();
            resetTimer();
        }

        // Обновление информации о текущем игроке
        function updateCurrentPlayer() {
            const players = [
                { name: 'Игрок 1', role: 'Врач', balance: '$10000' },
                { name: 'Игрок 2', role: 'Инвестор', balance: '$15000' },
                { name: 'Игрок 3', role: 'Финансист', balance: '$20000' }
            ];
            
            const currentPlayerData = players[currentPlayer - 1];
            const currentPlayerInfo = document.getElementById('currentPlayerInfo');
            
            currentPlayerInfo.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                    <div class="player-avatar player-${currentPlayer}" style="width: 20px; height: 20px; font-size: 10px;">${currentPlayer}</div>
                    <div>
                        <div style="font-weight: bold;">${currentPlayerData.name}</div>
                        <div style="font-size: 12px; color: #94a3b8;">${currentPlayerData.role}</div>
                    </div>
                </div>
                <div style="font-size: 14px; font-weight: bold; color: #10b981;">${currentPlayerData.balance}</div>
            `;
        }

        // Открытие банка
        function openBank() {
            window.open('/bank', '_blank');
        }

        // Просмотр деталей банка
        function viewDetails() {
            alert('Детальная информация о банке:\n\n• Текущий баланс: $3,000\n• Доходы: $6,000\n• Расходы: $2,500\n• PAYDAY: $3,500/мес\n\nДля полного доступа откройте банк.');
        }

        // Обновление баланса банка
        function updateBankBalance(balance) {
            const bankBalanceElement = document.getElementById('bankBalance');
            if (bankBalanceElement) {
                bankBalanceElement.textContent = `$${balance.toLocaleString()}`;
            }
        }

        // Таймер хода
        function startTimer() {
            timerInterval = setInterval(() => {
                gameTimer--;
                updateTimerDisplay();
                
                if (gameTimer <= 0) {
                    // Время вышло, автоматически переходим к следующему игроку
                    nextPlayer();
                }
            }, 1000);
        }

        function resetTimer() {
            gameTimer = 120;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameTimer / 60);
            const seconds = gameTimer % 60;
            const percentage = (gameTimer / 120) * 100;
            
            document.getElementById('timerText').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')} / 2:00`;
            document.getElementById('timerFill').style.width = `${percentage}%`;
        }

        // Обработчики событий
        document.getElementById('rollDiceBtn').addEventListener('click', rollDice);

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
