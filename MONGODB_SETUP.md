# MongoDB Atlas Setup –¥–ª—è EM1 Game

## üéØ –¶–µ–ª—å
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç –≤ MongoDB Atlas, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —Ç–µ—Ä—è–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB Atlas

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [MongoDB Atlas](https://www.mongodb.com/atlas)
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π M0)
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±–ª–∏–∂–∞–π—à–∏–π –∫ Railway)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞
1. **Database Access:**
   - –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - Username: `em1-game-user`
   - Password: —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å
   - Database User Privileges: `Read and write to any database`

2. **Network Access:**
   - –î–æ–±–∞–≤—å—Ç–µ IP –∞–¥—Ä–µ—Å: `0.0.0.0/0` (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å –ª—é–±–æ–≥–æ IP)
   - –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ IP Railway: `0.0.0.0/0`

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
1. –ù–∞–∂–º–∏—Ç–µ "Connect" –Ω–∞ –≤–∞—à–µ–º –∫–ª–∞—Å—Ç–µ—Ä–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ "Connect your application"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
4. –ó–∞–º–µ–Ω–∏—Ç–µ `<password>` –Ω–∞ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –ó–∞–º–µ–Ω–∏—Ç–µ `<dbname>` –Ω–∞ `em2_game`

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```
mongodb+srv://em1-game-user:<password>@cluster0.xxxxx.mongodb.net/em2_game?retryWrites=true&w=majority
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –í Railway Dashboard:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
2. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
MONGODB_URI=mongodb+srv://em1-game-user:<password>@cluster0.xxxxx.mongodb.net/em2_game?retryWrites=true&w=majority
MONGODB_DB_NAME=em2_game
```

### –õ–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
MONGODB_URI=mongodb+srv://em1-game-user:<password>@cluster0.xxxxx.mongodb.net/em2_game?retryWrites=true&w=majority
MONGODB_DB_NAME=em2_game
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–ª–ª–µ–∫—Ü–∏—è `rooms`
```javascript
{
  _id: ObjectId,
  id: String,           // ID –∫–æ–º–Ω–∞—Ç—ã
  name: String,         // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
  creatorId: String,    // ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
  creatorName: String,  // –ò–º—è —Å–æ–∑–¥–∞—Ç–µ–ª—è
  creatorEmail: String, // Email —Å–æ–∑–¥–∞—Ç–µ–ª—è
  maxPlayers: Number,   // –ú–∞–∫—Å–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤
  minPlayers: Number,   // –ú–∏–Ω–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤
  turnTime: Number,     // –í—Ä–µ–º—è —Ö–æ–¥–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  status: String,       // –°—Ç–∞—Ç—É—Å –∫–æ–º–Ω–∞—Ç—ã
  players: Array,       // –ú–∞—Å—Å–∏–≤ –∏–≥—Ä–æ–∫–æ–≤
  gameState: Object,    // –ü–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
  createdAt: Date,      // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  updatedAt: Date       // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
}
```

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–Ω–∞—Ç—ã:
1. –ö–æ–º–Ω–∞—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ SQLite (—Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è)
3. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ MongoDB Atlas** (–æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)

### –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞:
1. –°–µ—Ä–≤–µ—Ä –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MongoDB Atlas
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã –∏–∑ MongoDB
3. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏—Ö –≤ –ø–∞–º—è—Ç–∏
4. –ï—Å–ª–∏ MongoDB –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ SQLite

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–º–Ω–∞—Ç—ã:
1. –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å MongoDB**
3. –¢–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ SQLite (—Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway:
```
‚úÖ Connected to MongoDB Atlas
‚úÖ Loaded X rooms from MongoDB
```

### 2. –¢–µ—Å—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É –≤ –∏–≥—Ä–µ
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –Ω–∞ Railway
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–º–Ω–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ MongoDB Atlas
1. –û—Ç–∫—Ä–æ–π—Ç–µ MongoDB Atlas Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Database ‚Üí Browse Collections
3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é `rooms`
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–º–Ω–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB
```
‚ùå Failed to connect to MongoDB Atlas
```
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å MONGODB_URI
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ IP –∞–¥—Ä–µ—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ Network Access
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–æ–º–Ω–∞—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
```
‚ùå Failed to load rooms from MongoDB
```
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `em2_game` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ MongoDB Atlas

### Fallback –Ω–∞ SQLite
–ï—Å–ª–∏ MongoDB –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ SQLite:
```
‚ö†Ô∏è MongoDB not available, using SQLite fallback
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í MongoDB Atlas:
1. **Metrics** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. **Logs** - –ª–æ–≥–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
3. **Alerts** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –í Railway:
1. **Logs** - –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. **Metrics** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
3. **Deployments** - –∏—Å—Ç–æ—Ä–∏—è –¥–µ–ø–ª–æ–µ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
2. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –ø–æ IP (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
3. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### Backup:
- MongoDB Atlas –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
- SQLite —Ñ–∞–π–ª —Ç–∞–∫–∂–µ —Å–ª—É–∂–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–µ–π

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ –ö–æ–º–Ω–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ MongoDB Atlas
- ‚úÖ –î–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ SQLite
- ‚úÖ –í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–æ—Å—Ç–∞

---

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ Railway!
